# Troubleshooting

Common issues and fixes for the Karen Turman website.

## Build Issues

### Tailwind CSS build fails

**Symptoms:** `npm run css:build` errors out

**Check:**
1. Node modules installed? Run `npm install`
2. Syntax error in `css/main.css`? Check recent changes
3. Run `npm run css:build` directly to see full error

---

### Zola build fails

**Symptoms:** `zola build` errors out

**Common causes:**

1. **TOML parse error in config.toml**
   - Check for typos, missing quotes, or invalid field names
   - Zola is strict about TOML syntax

2. **Template syntax error**
   - Check recent changes to `templates/` files
   - Tera syntax: `{{ }}` for expressions, `{% %}` for statements

3. **Missing content file**
   - Check that paths in `config.toml` nav_links match actual files
   - Format: `path = "@/folder/index.md"`

4. **Invalid frontmatter**
   - Content files need valid TOML between `+++` markers

---

### Pre-commit hook fails

**Symptoms:** Commit blocked with build error

**Solutions:**
1. Fix the underlying build issue (see above)
2. Skip temporarily: `git commit --no-verify`
3. Check hook is using correct bash: `#!/usr/bin/env bash`

---

## Development Server

### Cache busting not working in dev

**Symptom:** `cachebust=true` URLs don't show hash in `zola serve`

**Explanation:** This is expected. `zola serve` optimizes for development speed and may skip hash generation. Cache busting works correctly in production builds (`zola build`).

**Verify:** Run `zola build` and check `public/index.html` for `?h=` parameters on CSS/JS URLs.

---

### CSS changes not showing

**Check:**
1. Is `npm run css:watch` running? Or use `npm run dev`
2. Hard refresh browser: `Ctrl+Shift+R` / `Cmd+Shift+R`
3. Check `static/css/generated.css` is being updated

---

### Theme toggle not working

**Check:**
1. Browser console for JavaScript errors
2. `static/main.js` is loaded (check Network tab)
3. `[data-theme]` attribute on `<html>` element

---

## Content Issues

### New page not appearing in navigation

**Fix:** Add entry to `nav_links` in `config.toml`:
```toml
{ label = "Page Name", path = "@/folder/index.md", short_path = "/folder" }
```

---

### Images not loading

**Check:**
1. File exists in `static/images/`
2. Using correct path in shortcode: `{{ image(src="images/filename.webp", ...) }}`
3. WebP version exists (not just JPG/PNG)

---

## Deployment Issues

### GitHub Actions failing

**Check:**
1. Go to repo → Actions tab → View failed workflow
2. Common issues:
   - `TOKEN` secret not set or expired
   - npm install failing (check package.json)
   - Build errors (same as local build issues)

---

### Site not updating after deploy

**Check:**
1. GitHub Actions workflow completed successfully?
2. Deployed to correct branch (`gh-pages`)?
3. GitHub Pages settings pointing to `gh-pages` branch?
4. Browser cache? Hard refresh or check incognito

---

## Zola Gotchas

### `get_url()` file not found with cachebust

The file must exist in `static/`, `content/`, or build output. Check path is correct.

### Feed/RSS not generating

Ensure `config.toml` has:
```toml
generate_feeds = true
feed_filenames = ["atom.xml"]
```

### Sitemap/robots.txt missing

These are auto-generated by `zola build`. Check `public/` directory after build.
